# üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ RAG Oozo System

## –û–±–∑–æ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é RAG Oozo System, –≤–∫–ª—é—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞ –∏ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
2. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–æ–¥ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rag_oozo/
‚îú‚îÄ‚îÄ backend/                    # Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/                   # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/              # API —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py        # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag_system.py     # –û—Å–Ω–æ–≤–Ω–∞—è RAG —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ document_processor.py  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ scripts/              # CLI —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ frontend/                 # Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ src/                 # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/      # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/        # API —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ tests/               # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ docs/                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Node.js 18+
- Docker –∏ Docker Compose
- Git

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### Backend

```bash
cd backend

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -r requirements-dev.txt
```

#### Frontend

```bash
cd frontend

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm install --save-dev @testing-library/react @testing-library/jest-dom
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cp env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env
nano .env
```

```env
# Development settings
DEBUG=true
LOG_LEVEL=DEBUG
OPENAI_API_KEY=your-api-key
EMBEDDING_MODEL_NAME=intfloat/multilingual-e5-large
DOCS_PATH=../docs
INDEX_PATH=./data/faiss_index
```

## üìù –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

### Python (Backend)

#### –°—Ç–∏–ª—å –∫–æ–¥–∞

- PEP 8 –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Type hints –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- Docstrings –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 88 —Å–∏–º–≤–æ–ª–æ–≤ (black)

#### –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```python
from typing import List, Dict, Any, Optional
from pydantic import BaseModel
import logging

logger = logging.getLogger(__name__)


class DocumentProcessor:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è RAG —Å–∏—Å—Ç–µ–º—ã."""
    
    def __init__(self, chunk_size: int = 1000, chunk_overlap: int = 200):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
        
        Args:
            chunk_size: –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –≤ —Å–∏–º–≤–æ–ª–∞—Ö
            chunk_overlap: –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏
        """
        self.chunk_size = chunk_size
        self.chunk_overlap = chunk_overlap
    
    def process_documents(self, documents: List[Dict[str, Any]]) -> List[str]:
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
        
        Args:
            documents: –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
            
        Returns:
            –°–ø–∏—Å–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
            
        Raises:
            ValueError: –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø—É—Å—Ç—ã–µ
        """
        if not documents:
            raise ValueError("–°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
        
        logger.info(f"–û–±—Ä–∞–±–æ—Ç–∫–∞ {len(documents)} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤")
        
        # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        chunks = []
        for doc in documents:
            doc_chunks = self._split_document(doc)
            chunks.extend(doc_chunks)
        
        logger.info(f"–°–æ–∑–¥–∞–Ω–æ {len(chunks)} —á–∞–Ω–∫–æ–≤")
        return chunks
    
    def _split_document(self, document: Dict[str, Any]) -> List[str]:
        """–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞."""
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–∑–±–∏–µ–Ω–∏—è
        pass
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```python
# –ò–º–ø–æ—Ä—Ç—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
import os
import sys
from typing import List, Dict, Any

# –ò–º–ø–æ—Ä—Ç—ã —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel

# –ò–º–ø–æ—Ä—Ç—ã –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
from .config import settings
from .utils import helpers
```

### JavaScript/React (Frontend)

#### –°—Ç–∏–ª—å –∫–æ–¥–∞

- ESLint + Prettier –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- TypeScript –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ö—É–∫–∞–º–∏
- PropTypes –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```javascript
import React, { useState, useEffect, useCallback } from 'react';
import PropTypes from 'prop-types';
import { sendMessage } from '../services/api';
import './ChatInterface.css';

/**
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å RAG —Å–∏—Å—Ç–µ–º–æ–π
 */
const ChatInterface = ({ onMessageSent, className }) => {
  const [messages, setMessages] = useState([]);
  const [inputValue, setInputValue] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  /**
   * –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
   * @param {string} message - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
   */
  const handleSendMessage = useCallback(async (message) => {
    if (!message.trim()) return;

    setIsLoading(true);
    
    try {
      const response = await sendMessage(message, true);
      
      const newMessage = {
        id: Date.now(),
        question: message,
        answer: response.answer,
        sources: response.sources,
        timestamp: new Date().toISOString()
      };
      
      setMessages(prev => [...prev, newMessage]);
      onMessageSent?.(newMessage);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    } finally {
      setIsLoading(false);
    }
  }, [onMessageSent]);

  /**
   * –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
   */
  const handleSubmit = (e) => {
    e.preventDefault();
    handleSendMessage(inputValue);
    setInputValue('');
  };

  return (
    <div className={`chat-interface ${className || ''}`}>
      <MessageList messages={messages} />
      <MessageInput
        value={inputValue}
        onChange={setInputValue}
        onSubmit={handleSubmit}
        isLoading={isLoading}
      />
    </div>
  );
};

ChatInterface.propTypes = {
  onMessageSent: PropTypes.func,
  className: PropTypes.string
};

export default ChatInterface;
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Backend —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
pip install pytest pytest-asyncio pytest-cov httpx
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
backend/tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py              # –§–∏–∫—Å—Ç—É—Ä—ã pytest
‚îú‚îÄ‚îÄ test_api/               # –¢–µ—Å—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ test_chat.py
‚îÇ   ‚îî‚îÄ‚îÄ test_system.py
‚îú‚îÄ‚îÄ test_rag_system/        # –¢–µ—Å—Ç—ã RAG —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_rag_system.py
‚îÇ   ‚îî‚îÄ‚îÄ test_document_processor.py
‚îî‚îÄ‚îÄ test_integration/       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
    ‚îî‚îÄ‚îÄ test_full_flow.py
```

#### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞

```python
import pytest
from fastapi.testclient import TestClient
from unittest.mock import Mock, patch

from app.main import app
from app.rag_system import RAGSystem

client = TestClient(app)


class TestChatAPI:
    """–¢–µ—Å—Ç—ã –¥–ª—è —á–∞—Ç API."""
    
    def test_query_endpoint_success(self):
        """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ API."""
        with patch.object(RAGSystem, 'query') as mock_query:
            mock_query.return_value = {
                'answer': '–¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç',
                'sources': []
            }
            
            response = client.post(
                '/api/query',
                json={
                    'question': '–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å',
                    'return_sources': True
                }
            )
            
            assert response.status_code == 200
            data = response.json()
            assert 'answer' in data
            assert 'sources' in data
    
    def test_query_endpoint_invalid_request(self):
        """–¢–µ—Å—Ç –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞."""
        response = client.post(
            '/api/query',
            json={'invalid': 'data'}
        )
        
        assert response.status_code == 422
    
    @pytest.mark.asyncio
    async def test_rag_system_initialization(self):
        """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ RAG —Å–∏—Å—Ç–µ–º—ã."""
        rag = RAGSystem()
        
        # –ú–æ–∫–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        with patch('app.rag_system.HuggingFaceEmbeddings'):
            with patch('app.rag_system.FAISS'):
                rag.initialize()
                assert rag._initialized is True
```

#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=app --cov-report=html

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/test_api/test_chat.py::TestChatAPI::test_query_endpoint_success

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
pytest -n auto
```

### Frontend —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install --save-dev @testing-library/react @testing-library/jest-dom jest
```

#### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞

```javascript
import React from 'react';
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import '@testing-library/jest-dom';
import ChatInterface from '../components/ChatInterface';

// –ú–æ–∫–∞–µ–º API —Å–µ—Ä–≤–∏—Å
jest.mock('../services/api', () => ({
  sendMessage: jest.fn()
}));

describe('ChatInterface', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  test('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞', () => {
    render(<ChatInterface />);
    
    expect(screen.getByPlaceholderText(/–≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å/i)).toBeInTheDocument();
    expect(screen.getByRole('button', { name: /–æ—Ç–ø—Ä–∞–≤–∏—Ç—å/i })).toBeInTheDocument();
  });

  test('–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏', async () => {
    const mockSendMessage = require('../services/api').sendMessage;
    mockSendMessage.mockResolvedValue({
      answer: '–¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç',
      sources: []
    });

    render(<ChatInterface />);
    
    const input = screen.getByPlaceholderText(/–≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å/i);
    const button = screen.getByRole('button', { name: /–æ—Ç–ø—Ä–∞–≤–∏—Ç—å/i });
    
    fireEvent.change(input, { target: { value: '–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å' } });
    fireEvent.click(button);
    
    await waitFor(() => {
      expect(mockSendMessage).toHaveBeenCalledWith('–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å', true);
    });
  });

  test('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ', async () => {
    const mockSendMessage = require('../services/api').sendMessage;
    mockSendMessage.mockRejectedValue(new Error('API Error'));

    render(<ChatInterface />);
    
    const input = screen.getByPlaceholderText(/–≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å/i);
    const button = screen.getByRole('button', { name: /–æ—Ç–ø—Ä–∞–≤–∏—Ç—å/i });
    
    fireEvent.change(input, { target: { value: '–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å' } });
    fireEvent.click(button);
    
    await waitFor(() => {
      expect(screen.getByText(/–æ—à–∏–±–∫–∞/i)).toBeInTheDocument();
    });
  });
});
```

#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
npm test

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm test -- --coverage

# –¢–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ
npm test -- --watch

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
npm test -- --testNamePattern="–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞"
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Git workflow

#### –í–µ—Ç–∫–∏

- `main` - –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∫–æ–¥
- `develop` - –≤–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `feature/*` - –≤–µ—Ç–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- `bugfix/*` - –≤–µ—Ç–∫–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤
- `hotfix/*` - —Å—Ä–æ—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –ö–æ–º–º–∏—Ç—ã

```bash
# –§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–æ–≤
feat: –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
fix: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
docs: –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API
test: –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
refactor: —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥—É–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```

#### Pull Request –ø—Ä–æ—Ü–µ—Å—Å

1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏
2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. –°–æ–∑–¥–∞–Ω–∏–µ Pull Request
4. Code review
5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—á–∞–Ω–∏–π
6. Merge –≤ develop

### CI/CD Pipeline

#### GitHub Actions

```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test-backend:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.11
    
    - name: Install dependencies
      run: |
        cd backend
        pip install -r requirements.txt
        pip install -r requirements-dev.txt
    
    - name: Run tests
      run: |
        cd backend
        pytest --cov=app --cov-report=xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v1

  test-frontend:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    
    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: 18
    
    - name: Install dependencies
      run: |
        cd frontend
        npm ci
    
    - name: Run tests
      run: |
        cd frontend
        npm test -- --coverage --watchAll=false
    
    - name: Build
      run: |
        cd frontend
        npm run build
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

#### Python docstrings

```python
def process_documents(documents: List[Dict[str, Any]], 
                     chunk_size: int = 1000) -> List[str]:
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏.
    
    Args:
        documents: –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ö–∞–∂–¥—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
                  –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª—é—á–∏ 'title' –∏ 'content'.
        chunk_size: –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –≤ —Å–∏–º–≤–æ–ª–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000.
    
    Returns:
        –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö —á–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
    
    Raises:
        ValueError: –ï—Å–ª–∏ documents –ø—É—Å—Ç–æ–π –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
        ProcessingError: –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ.
    
    Example:
        >>> docs = [{'title': 'doc1', 'content': 'text...'}]
        >>> chunks = process_documents(docs, chunk_size=500)
        >>> len(chunks)
        2
    """
    pass
```

#### JSDoc –¥–ª—è JavaScript

```javascript
/**
 * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ RAG —Å–∏—Å—Ç–µ–º—É
 * @param {string} question - –í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 * @param {boolean} [returnSources=true] - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
 * @returns {Promise<Object>} –û—Ç–≤–µ—Ç —Å–∏—Å—Ç–µ–º—ã —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
 * @throws {Error} –ü—Ä–∏ –æ—à–∏–±–∫–µ API
 * 
 * @example
 * const response = await sendMessage('–ß—Ç–æ —Ç–∞–∫–æ–µ RAG?', true);
 * console.log(response.answer);
 * console.log(response.sources);
 */
async function sendMessage(question, returnSources = true) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### OpenAPI/Swagger

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI(
    title="RAG Oozo System API",
    description="API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã RAG —Å –ø–æ–∏—Å–∫–æ–º –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç–≤–µ—Ç–æ–≤",
    version="1.0.0"
)

class QueryRequest(BaseModel):
    question: str = Field(..., description="–í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    return_sources: bool = Field(True, description="–í–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏")

class QueryResponse(BaseModel):
    question: str = Field(..., description="–ò—Å—Ö–æ–¥–Ω—ã–π –≤–æ–ø—Ä–æ—Å")
    answer: str = Field(..., description="–û—Ç–≤–µ—Ç —Å–∏—Å—Ç–µ–º—ã")
    sources: Optional[List[Source]] = Field(None, description="–ò—Å—Ç–æ—á–Ω–∏–∫–∏")

@app.post("/api/query", response_model=QueryResponse)
async def query(request: QueryRequest):
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    
    - **question**: –í–æ–ø—Ä–æ—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    - **return_sources**: –í–∫–ª—é—á–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ –æ—Ç–≤–µ—Ç
    
    Returns:
        –û—Ç–≤–µ—Ç —Å–∏—Å—Ç–µ–º—ã —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
    """
    pass
```

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –õ–∏–Ω—Ç–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã

#### Python

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
pip install black isort flake8 mypy

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black app/
isort app/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
flake8 app/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
mypy app/
```

#### JavaScript

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
npm install --save-dev eslint prettier @typescript-eslint/parser

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
npx prettier --write src/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
npx eslint src/
```

### Pre-commit hooks

```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/psf/black
    rev: 22.3.0
    hooks:
      - id: black
        language_version: python3

  - repo: https://github.com/pycqa/isort
    rev: 5.10.1
    hooks:
      - id: isort

  - repo: https://github.com/pycqa/flake8
    rev: 4.0.1
    hooks:
      - id: flake8
```

### IDE –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### VS Code

```json
// .vscode/settings.json
{
  "python.defaultInterpreterPath": "./backend/venv/bin/python",
  "python.formatting.provider": "black",
  "python.linting.enabled": true,
  "python.linting.flake8Enabled": true,
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.organizeImports": true
  }
}
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
docker-compose -f docker-compose.dev.yml up --build

# –ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
cd backend && uvicorn main:app --reload
cd frontend && npm start
```

### Docker Compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```yaml
# docker-compose.dev.yml
version: '3.8'

services:
  rag-app:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    ports:
      - "8000:8000"
    volumes:
      - ./backend:/app
      - ./docs:/app/docs:ro
    environment:
      - DEBUG=true
      - LOG_LEVEL=DEBUG
    command: uvicorn main:app --reload --host 0.0.0.0 --port 8000

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      - REACT_APP_API_URL=http://localhost:8000
    command: npm start
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ > 80%
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–≥–æ–≤ < 5 –Ω–∞ 1000 —Å—Ç—Ä–æ–∫
- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ < 5 –º–∏–Ω—É—Ç
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ < 2 –º–∏–Ω—É—Ç—ã

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è
pytest --cov=app --cov-report=html

# –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
pip install radon
radon cc app/ -a

# –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
pip install bandit
bandit -r app/
```

## üîÑ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### Semantic Versioning

- MAJOR.MINOR.PATCH
- MAJOR: –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è API
- MINOR: –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- PATCH: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤

### Changelog

```markdown
# Changelog

## [1.1.0] - 2024-01-15

### Added
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ù–æ–≤—ã–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Changed
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞

### Fixed
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π

## [1.0.0] - 2024-01-01

### Added
- –ë–∞–∑–æ–≤–∞—è RAG —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```

---

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ RAG Oozo System —Å —É—á–µ—Ç–æ–º –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤. 